1. Cannot preserve order of structures

2. For comments, outer `extend' groups are logically grouped together, so inner comments are lost

3. For comments, trailing comments are not stored for group/nested message/message, so those are lost in formatting.
